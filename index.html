<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>とあるロゴジェネレーター</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @font-face {
      font-family: "Kozuka Mincho Pro B";
      src: local("Kozuka Mincho Pro B"), local("KozMinPro-B");
      font-weight: bold;
    }

    body {
      font-family: sans-serif;
      padding: 1rem;
      background: #f4f4f4;
      text-align: center;
    }
    input, select, button {
      font-size: 1rem;
      padding: 0.5rem;
      margin: 0.5rem;
      width: 90%;
      max-width: 400px;
    }
    #preview {
      margin-top: 2rem;
      width: 100%;
      max-width: 600px;
      height: auto;
      margin-left: auto;
      margin-right: auto;
    }
    svg {
      width: 100%;
      height: auto;
    }
    svg text {
      dominant-baseline: middle;
      text-anchor: middle;
    }
    .style-index {
      font-family: "Kozuka Mincho Pro B", serif;
      fill: #337ab7;
      font-size: 48px;
      filter: drop-shadow(2px 2px 2px #666);
    }
    .style-railgun {
      font-family: 'Noto Sans JP', sans-serif;
      fill: url(#railgun-gradient);
      font-size: 48px;
      filter: drop-shadow(2px 2px 2px #c63);
    }
  </style>
</head>
<body>
  <h1>とあるロゴジェネレーター</h1>
  <input type="text" id="logoText" placeholder="テキストを入力">
  <select id="styleSelect">
    <option value="index">とある魔術の禁書目録</option>
    <option value="railgun">とある科学の超電磁砲</option>
  </select>
  <br>
  <label>グラデーションカラー1：<input type="color" id="color1" value="#ff9900"></label>
  <label>カラー2：<input type="color" id="color2" value="#cc0000"></label>
  <br>
  <button onclick="downloadSVG()">SVGとしてダウンロード</button>
  <button onclick="downloadPNG()">PNGとしてダウンロード</button>

  <div id="preview">
    <svg id="logoSVG" viewBox="0 0 600 200" preserveAspectRatio="xMidYMid meet">
      <defs>
        <linearGradient id="railgun-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#ff9900"/>
          <stop offset="100%" stop-color="#cc0000"/>
        </linearGradient>
      </defs>
      <text x="300" y="100" class="style-index" id="svgText">とある文字</text>
    </svg>
  </div>

  <script>
    const textInput = document.getElementById("logoText");
    const styleSelect = document.getElementById("styleSelect");
    const svgText = document.getElementById("svgText");
    const color1 = document.getElementById("color1");
    const color2 = document.getElementById("color2");

    function updateGradient() {
      const stop1 = document.querySelector('#railgun-gradient stop:nth-child(1)');
      const stop2 = document.querySelector('#railgun-gradient stop:nth-child(2)');
      stop1.setAttribute('stop-color', color1.value);
      stop2.setAttribute('stop-color', color2.value);
    }

    function updateLogo() {
      svgText.textContent = textInput.value || "とある文字";
      svgText.setAttribute("class", styleSelect.value === "index" ? "style-index" : "style-railgun");
      updateGradient();
    }

    textInput.addEventListener("input", updateLogo);
    styleSelect.addEventListener("change", updateLogo);
    color1.addEventListener("input", updateLogo);
    color2.addEventListener("input", updateLogo);

    function downloadSVG() {
      const svg = document.getElementById("logoSVG");
      const serializer = new XMLSerializer();
      const source = serializer.serializeToString(svg);
      const blob = new Blob([source], { type: "image/svg+xml;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "toaru-logo.svg";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    function downloadPNG() {
      const svg = document.getElementById("logoSVG");
      const svgData = new XMLSerializer().serializeToString(svg);
      const canvas = document.createElement("canvas");
      canvas.width = 600;
      canvas.height = 200;
      const ctx = canvas.getContext("2d");

      const img = new Image();
      const svgBlob = new Blob([svgData], { type: "image/svg+xml;charset=utf-8" });
      const url = URL.createObjectURL(svgBlob);

      img.onload = function() {
        ctx.drawImage(img, 0, 0);
        URL.revokeObjectURL(url);
        const pngUrl = canvas.toDataURL("image/png");
        const a = document.createElement("a");
        a.href = pngUrl;
        a.download = "toaru-logo.png";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      };
      img.src = url;
    }

    updateLogo();
  </script>
</body>
</html>
